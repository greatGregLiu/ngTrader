<div ng-show="account.showLastDayMessage" class="alert alert-danger">Last day! Sell off all items!</div>
<div class="row">
  <div class="col-md-3 col-xs-12">
    <div class="accountInfo bg-info">
      <strong>Net Worth: </strong>{{ convertToDollars(account.netWorth) | currency}}
    </div>
  </div>
  <div class="col-md-9 col-xs-12">
    <ul class="nav nav-pills pull-right">
      <li ng-repeat="city in cities | orderBy:'name'" ng-class="(city.name==account.currentCity.name) ? 'active' : ''">
        <a ng-if="city.name==account.currentCity.name">{{city.name}}</a>
        <a ng-if="city.name!=account.currentCity.name" href="#" ng-click="goToCity(city)">{{city.name}}</a> 
      </li>
    </ul>
  </div>
</div>
<div class="row">
  <div class="col-sm-6 col-sm-push-6 col-md-7 col-md-push-5" >
    <h2>
      <strong>Days Left:</strong> {{ account.daysLeft }}
      <span class="pull-right">
        <strong>Cash:</strong> {{ convertToDollars(account.currentCash) | currency}}
      </span>
    </h2>
    <table id="marketTable" class="table table-hover table-condensed">
      <thead>
        <th>Name</th>
        <th>Price</th>
        <th>Action</th>
      </thead>
      <tbody>
        <tr ng-repeat="item in commodities | orderBy: 'name'" ng-mouseover="setMarketHoverItem(item)" ng-mouseleave="resetMarketHoverItem()">
          <td width="150px">
            <i class="fa" ng-if="item.priceChanged" ng-class="(item.priceHigh) ? 'fa-arrow-circle-up' : 'fa-arrow-circle-down'"></i> 
            <i class="fa fa-minus-circle" ng-if="!item.priceChanged"></i> 
            <span ng-class="(item.special) ? 'dailySpecial' : ''">{{ item.name }}</span>
          </td>
          <td width="100px">{{ convertToDollars(item.currentPrice) | currency }}</td>
          <td>
            <p ng-hide="item.maxQuantityPurchasable < 1">
              <button class="btn btn-success" ng-click="buyItem(item, 1)" ng-hide="item.currentPrice > account.currentCash">Buy 1</button>
              <button class="btn btn-success" ng-click="buyItem(item, item.maxQuantityPurchasable)" ng-hide="item.maxQuantityPurchasable < 2">Buy {{ item.maxQuantityPurchasable | number }}</button>
            </p>
            <p ng-repeat="purchasedItem in item.purchasedItems">
              <button class="btn btn-danger" ng-click="sellItem(purchasedItem)">sell {{ purchasedItem.quantity | number }}</button>
              bought @ {{ convertToDollars(purchasedItem.purchasePrice) | currency }}
            </p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="col-sm-6 col-sm-pull-6 col-md-5 col-md-pull-7">
    <div class="col-xs-12 transactions">
      <h2>Transactions</h2>
      <table class="table table-condensed table-hover">
        <thead>
          <tr>
            <th>Count</th>
            <th>Name</th>
            <th>Buy @</th>
            <th>Sold @</th>
            <th>Profit Each</th>
            <th>Profit Total</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="item in account.transactions | orderBy:'-profitEach' | filter:marketHoverItem">
            <td>{{item.quantity | number }}</td>
            <td>{{item.itemName}}</td>
            <td>{{convertToDollars(item.purchasePrice) | currency}}</td>
            <td>{{convertToDollars(item.sellPrice) | currency}}</td>
            <td>
              <strong>{{convertToDollars(item.profitEach) | currency}}</strong>
            </td>
            <td>
              <strong>{{convertToDollars(item.profitTotal) | currency}}</strong>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-xs-12">
      <h2>High Scores</h2>
      <a href="#" ng-click="resetHighScores()">reset</a>
      <ul>
        <li ng-repeat="highScore in account.highScores | orderBy:'-score' ">{{ convertToDollars(highScore.score) | currency}}</li>
      </ul>
    </div>
  </div>
</div>
