<div class="container">
  <div ng-show="account.daysLeft === 0" class="alert alert-danger">Last day! Sell off all items!</div>
  <div class="row">
    <div class="col-xs-3">
      <div class="accountInfo bg-info">
        <strong>Net Worth:</strong>{{ account.currentCash | currency}}
      </div>
    </div>
    <div class="col-xs-9">
      <ul class="nav nav-pills pull-right">
        <li ng-repeat="city in cities | orderBy:'name'" ng-class="(city.name==account.currentCity.name) ? 'active' : ''">
          <a ng-if="city.name==account.currentCity.name" >{{city.name}}</a>
          <a ng-if="city.name!=account.currentCity.name" href="#" ng-click="goToCity(city)">{{city.name}}</a> 
        </li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-5">
      <div class="col-xs-12">
        <div>
          <div ng-repeat="item in account.inventory | orderBy:'name'">
            {{item.name}}({{item.quantity}}) @ {{item.purchasePrice | currency}} each
            <div>
              <button class="label label-danger" ng-click="sellItem(item)">sell</button>for {{item.marketPrice | currency}}
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12 transactions">
        <h2>Transactions</h2>
        <table class="table table-condensed table-hover">
          <thead>
            <tr>
              <th>Count</th>
              <th>Name</th>
              <th>Buy @</th>
              <th>Sold @</th>
              <th>Profit Each</th>
              <th>Profit Total</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in account.transactions | orderBy:'-profitEach' | filter:marketHoverItem">
              <td>{{item.quantity}}</td>
              <td>{{item.itemName}}</td>
              <td>{{item.purchasePrice | currency}}</td>
              <td>{{item.sellPrice | currency}}</td>
              <td>
                <strong>{{item.profitEach | currency}}</strong>
              </td>
              <td>
                <strong>{{item.profitTotal | currency}}</strong>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-xs-12">
        <h2>High Scores</h2>
        <ul>
          <li ng-repeat="highScore in account.highScores | orderBy:'score' ">{{ highScore.score | currency}}</li>
        </ul>
      </div>
    </div>
    <div class="col-xs-7">
      <h2>
        <strong>Days Left:</strong>{{ account.daysLeft }}
        <span class="pull-right">
          <strong>Cash:</strong>{{ account.currentCash | currency}}
        </span>
      </h2>
      <table id="marketTable" class="table table-hover table-condensed">
        <thead>
          <th>Name</th>
          <th>Price</th>
          <th>Action</th>
        </thead>
        <tbody>
          <tr ng-repeat="item in commodities | orderBy: 'name'" ng-mouseover="setMarketHoverItem(item)" ng-mouseleave="resetMarketHoverItem()">
            <td width="150px">
              <i class="fa" ng-class="(item.priceHigh) ? 'fa-arrow-circle-up' : 'fa-arrow-circle-down'"></i> {{ item.name }}</td>
            <td width="100px">{{ item.currentPrice | currency }}</td>
            <td>
              <p ng-hide="item.maxQuantityPurchasable < 1">
                <button class="btn btn-success" ng-click="buyItem(item, item.maxQuantityPurchasable)">Buy {{item.maxQuantityPurchasable}}</button>
              </p>
              <p ng-repeat="purchasedItem in item.purchasedItems">
                <button class="btn btn-danger" ng-click="sellItem(purchasedItem)">sell {{purchasedItem.quantity}}</button>
                bought @ {{purchasedItem.purchasePrice | currency}}
              </p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
